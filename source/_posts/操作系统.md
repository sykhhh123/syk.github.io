---
title: 操作系统
date: 2018-09-26 11:40:25
tags: 学习
---

<!--more--> 

# 第一讲

## 中央处理器(CPU)

-	 处理器由运算器，控制器，一系列的寄存器以及高速缓存构成
-	 两类寄存器：
	-	<font color = 0x000000009ff>用户可见寄存器</font>
	-  <font color = 0x000000009ff>控制和状态寄存器</font>：
		-	程序计数器
		- 指令寄存器
		- 程序状态字

-	操作系统的需求——保护
	-	从操作系统的特征考虑：
		-	并发，共享->实现保护和控制
		- 	硬件提供基本运行机制：
			-	处理器具有特权级别，能在不同的特权级别运行不同指令集合
			-  将 OS 和用户程序隔离

-	处理器的状态(模式：mod)
	-	<font color = 0x000000009ff>程序状态字寄存器(PSW)</font> 中专门设置若干位

-	特权指令和非特权指令
	-	操作系统需要两种状态： **内核态** 和 **用户态**
	-  特权指令：启动I/O 内存清零 修改程序状态字 设置时钟 允许/禁止中断 停机
	-  非特权指令： 控制转移 算术 访管指令
	-  x86 支持 R0-R3 四个级别特权指令 R0 相当于用户态 R3 相当于内核态

-	CPU状态之间的转换
	-	用户态->内核态： 只能中断/异常/陷入机制
	- 	内核态->用户态： 设置 PSW
	-  特殊指令：访管指令（即陷入指令） 提供给用户程序接口调用操作系统的功能 <br> int, trap, syscall, sysenter/sysexit